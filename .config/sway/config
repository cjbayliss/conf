# no borders, unless in tiling mode, show tabs for more than one window
default_border pixel 1
workspace_layout tabbed
titlebar_border_thickness 0
titlebar_padding 0 0
hide_edge_borders --i3 both
# also set the font really small in titlebars
font pango:monospace 0

# background
output '*' background '#000000' solid_color

# disable legacy stuff
xwayland false

# input config
input '1452:553:appletouch' {
      tap enabled
      natural_scroll enabled
}

# on a macbook, so use meta/command/super
set $mod Mod4

# move windows with mouse+$mod
floating_modifier $mod

# sakura is a libvte terminal that doesn't pull in needless dependencies
bindsym $mod+Return exec sakura
bindsym $mod+d exec sakura -t menu -e "sh -c 'dmenu_path | fzf | xargs swaymsg exec'" 
for_window [title="^menu$"] border pixel 2, floating enable

# kill focused window
bindsym $mod+Shift+q kill

# change focus
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# toggle floating
bindsym $mod+Shift+space floating toggle

# switch to workspace
bindsym $mod+1 workspace 1
bindsym $mod+2 workspace 2
bindsym $mod+3 workspace 3
bindsym $mod+4 workspace 4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace 8
bindsym $mod+9 workspace 9
bindsym $mod+0 workspace 10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace 1
bindsym $mod+Shift+2 move container to workspace 2
bindsym $mod+Shift+3 move container to workspace 3
bindsym $mod+Shift+4 move container to workspace 4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace 8
bindsym $mod+Shift+9 move container to workspace 9
bindsym $mod+Shift+0 move container to workspace 10

# reload the configuration file
bindsym $mod+Shift+c reload
# exit
bindsym $mod+Shift+e exec swaynag -t warning -f 'Sans Serif 11' -m 'Do you really want to exit sway? This will end your Wayland session.' -b 'Yes, exit sway' 'swaymsg exit'

# resize window
mode "resize" {
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

# adjust screen brightness
bindsym XF86MonBrightnessDown exec "light -U 5"
bindsym XF86MonBrightnessUp exec "light -A 5"

# pulseaudio systems
#bindsym XF86AudioRaiseVolume exec "pactl set-sink-mute @DEFAULT_SINK@ 0; pactl set-sink-volume @DEFAULT_SINK@ +2% "
#bindsym XF86AudioLowerVolume exec "pactl set-sink-mute @DEFAULT_SINK@ 0; pactl set-sink-volume @DEFAULT_SINK@ -2% "
#bindsym XF86AudioMute exec "pactl set-sink-mute @DEFAULT_SINK@ toggle"

# alsa only systems
bindsym XF86AudioRaiseVolume exec "amixer set Master 2%+ unmute"
bindsym XF86AudioLowerVolume exec "amixer set Master 2%- unmute"
bindsym XF86AudioMute exec "amixer set Master toggle"

# control cmus
bindsym XF86AudioPlay exec "cmus-remote --pause"
bindsym XF86AudioNext exec "cmus-remote --next"
bindsym XF86AudioPrev exec "cmus-remote --prev"

# notifications
#exec mako --default-timeout 5000

# turn off screen after 30s, and lock after 10m
exec swayidle -w \
        timeout 600 'swaylock -f -c 000000' \
        timeout 30 'swaymsg "output * dpms off"' \
        resume 'swaymsg "output * dpms on"'

# ibus stuff
for_window [app_id="ibus-extension-gtk3"] border none, floating enable
bindsym $mod+space exec sh -c '[ "$(ibus engine)" == "anthy" ] && ibus engine xkb:us::eng || ibus engine anthy'
exec ibus-daemon -dr
