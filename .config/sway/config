# no borders, unless in tiling mode, show tabs for more than one window
default_border pixel 1
workspace_layout tabbed
titlebar_border_thickness 0
titlebar_padding 0
hide_edge_borders --i3 both
# also set the font really small in titlebars
font pango:monospace 0

# this is annoying, so disable it
focus_follows_mouse no

# disable legacy stuff
xwayland disable

# background
output '*' background '#000000' solid_color

# input config
input '1452:553:appletouch' {
      tap enabled
      natural_scroll enabled
}

# move windows with mouse+$mod
floating_modifier Alt

# screenshots
bindsym f12 exec grim
bindsym shift+f12 exec grim -g "$(slurp)"

# resize window
mode "resize" {
     bindsym Left resize shrink width 10 px or 10 ppt
     bindsym Down resize grow height 10 px or 10 ppt
     bindsym Up resize shrink height 10 px or 10 ppt
     bindsym Right resize grow width 10 px or 10 ppt

     # back to normal: Enter or Escape
     bindsym Return mode "default"
     bindsym Escape mode "default"
}

mode "bindings" {
     # navigation
     bindsym n focus next; mode "default"
     bindsym p focus prev; mode "default"
     bindsym Ctrl+z focus prev; mode "default"

     # change focus
     bindsym Left focus left; mode "default"
     bindsym Down focus down; mode "default"
     bindsym Up focus up; mode "default"
     bindsym Right focus right; mode "default"

     # move focused window
     bindsym Shift+Left move left; mode "default"
     bindsym Shift+Down move down; mode "default"
     bindsym Shift+Up move up; mode "default"
     bindsym Shift+Right move right; mode "default"

     # toggle floating
     bindsym space floating toggle; mode "default"

     # run programs
     bindsym e exec swaymsg [app_id=\"emacs\"] focus || emacs --no-site-file --no-site-lisp; mode "default"
     bindsym f exec swaymsg [app_id=\"firefox\"] focus || firefox; mode "default"

     # lock the screen
     bindsym l exec swaylock -f -c 000000; mode "default"

     # resize
     bindsym r mode "resize"

     # source config
     bindsym c reload; mode "default"

     bindsym q exec swaynag -t warning \
                         -f 'Sans Serif 11' \
                         -m 'Do you really want to exit sway? This will end your Wayland session.' \
                         -b 'Yes, exit sway' 'swaymsg exit'; mode "default"

     # back to normal on Escape
     bindsym Escape mode "default"
}

bindsym Ctrl+z mode "bindings"

# adjust screen brightness
bindsym XF86MonBrightnessDown exec "light -U 5"
bindsym XF86MonBrightnessUp exec "light -A 5"

# alsa only systems
bindsym XF86AudioRaiseVolume exec "amixer set Master 2%+ unmute"
bindsym XF86AudioLowerVolume exec "amixer set Master 2%- unmute"
bindsym XF86AudioMute exec "amixer set Master toggle"

# control emms
bindsym XF86AudioPlay exec emacsclient -e "(emms-play/pause-handler)"
bindsym XF86AudioNext exec emacsclient -e "(emms-next)"
bindsym XF86AudioPrev exec emacsclient -e "(emms-previous)"

# turn off screen after 2m
exec swayidle -w \
        timeout 120 'swaymsg "output * dpms off"' \
        resume 'swaymsg "output * dpms on"'
