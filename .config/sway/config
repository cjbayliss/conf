# no borders, unless in tiling mode, show tabs for more than one window
default_border pixel 1
workspace_layout tabbed
titlebar_border_thickness 0
titlebar_padding 0
hide_edge_borders --i3 both
# also set the font really small in titlebars
font pango:monospace 0

# background
output '*' background '#000000' solid_color

# disable legacy stuff
xwayland false

# input config
input '1452:553:appletouch' {
      tap enabled
      natural_scroll enabled
}

# on a macbook, so use meta/command/super
set $mod Mod4

# move windows with mouse+$mod
floating_modifier $mod

# NOTE: build emacs from the 'feature/pgtk' branch with:
#
#     ./configure --with-pgtk --prefix="$HOME/.local/"
#
bindsym $mod+s exec pidof emacs && swaymsg [app_id=\"emacs\"] focus || $HOME/.local/bin/emacs
bindsym $mod+f exec pidof firefox && swaymsg [app_id=\"firefox-wayland\"] focus || firefox

# lock the screen
bindsym $mod+l exec swaylock -f -i $HOME/pictures/wallpaper.png -s fill

# screenshots
bindsym f12 exec grim
bindsym shift+f12 exec grim -g "$(slurp)"

# kill focused window
bindsym $mod+Shift+q kill

# change focus
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+Left move left
bindsym $mod+Shift+Down move down
bindsym $mod+Shift+Up move up
bindsym $mod+Shift+Right move right

# toggle floating
bindsym $mod+Shift+space floating toggle

# reload the configuration file
bindsym $mod+Shift+c reload
# exit
bindsym $mod+Shift+e exec swaynag -t warning -f 'Sans Serif 11' -m 'Do you really want to exit sway? This will end your Wayland session.' -b 'Yes, exit sway' 'swaymsg exit'

# resize window
mode "resize" {
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

# adjust screen brightness
bindsym XF86MonBrightnessDown exec "light -U 5"
bindsym XF86MonBrightnessUp exec "light -A 5"

# alsa only systems
bindsym XF86AudioRaiseVolume exec "amixer set Master 2%+ unmute"
bindsym XF86AudioLowerVolume exec "amixer set Master 2%- unmute"
bindsym XF86AudioMute exec "amixer set Master toggle"

# control emms
bindsym XF86AudioPlay exec emacsclient -e "(emms-play/pause-handler)"
bindsym XF86AudioNext exec emacsclient -e "(emms-next)"
bindsym XF86AudioPrev exec emacsclient -e "(emms-previous)"

# turn off screen after 2m
exec swayidle -w \
        timeout 120 'swaymsg "output * dpms off"' \
        resume 'swaymsg "output * dpms on"'

exec $HOME/.local/bin/emacs
